function [ val, Lfx, Lfxx ] = autoLf( x_n, i, para, x_f, del )
x = x_n(1);
y = x_n(2);
u = x_n(3);
l = x_n(4);
xf = x_f(1);
yf = x_f(2);
uf = x_f(3);
lf = x_f(4);
d1 = del(1);
d2 = del(2);
d3 = del(3);
d4 = del(4);
val = [(d4^2*(((l - lf)^2/d4^2 + 1)^(1/2) - 1) + d3^2*(((u - uf)^2/d3^2 + 1)^(1/2) - 1) + d1^2*(((x - xf)^2/d1^2 + 1)^(1/2) - 1) + d2^2*(((y - yf)^2/d2^2 + 1)^(1/2) - 1))];
Lfx = [((2*x - 2*xf)/(2*((x - xf)^2/d1^2 + 1)^(1/2))); ((2*y - 2*yf)/(2*((y - yf)^2/d2^2 + 1)^(1/2))); ((2*u - 2*uf)/(2*((u - uf)^2/d3^2 + 1)^(1/2))); ((2*l - 2*lf)/(2*((l - lf)^2/d4^2 + 1)^(1/2)))];
Lfxx = [(1/((x - xf)^2/d1^2 + 1)^(1/2) - (2*x - 2*xf)^2/(4*d1^2*((x - xf)^2/d1^2 + 1)^(3/2))) (0) (0) (0); (0) (1/((y - yf)^2/d2^2 + 1)^(1/2) - (2*y - 2*yf)^2/(4*d2^2*((y - yf)^2/d2^2 + 1)^(3/2))) (0) (0); (0) (0) (1/((u - uf)^2/d3^2 + 1)^(1/2) - (2*u - 2*uf)^2/(4*d3^2*((u - uf)^2/d3^2 + 1)^(3/2))) (0); (0) (0) (0) (1/((l - lf)^2/d4^2 + 1)^(1/2) - (2*l - 2*lf)^2/(4*d4^2*((l - lf)^2/d4^2 + 1)^(3/2)))];
end