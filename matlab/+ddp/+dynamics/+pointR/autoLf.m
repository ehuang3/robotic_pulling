function [Lf, Lfx, Lfxx] = autoLf(x, i, param, xf, p, k)
x1 = x(1);
x2 = x(2);
xf1 = xf(1);
xf2 = xf(2);
p1 = p(1);
p2 = p(2);
k1 = k(1);
k2 = k(2);
Lf = [(- k1*(p1 - ((x1 - xf1)^2 + p1^2)^(1/2)) - k2*(p2 - ((x2 - xf2)^2 + p2^2)^(1/2)))];
Lfx = [((k1*(2*x1 - 2*xf1))/(2*((x1 - xf1)^2 + p1^2)^(1/2))); ((k2*(2*x2 - 2*xf2))/(2*((x2 - xf2)^2 + p2^2)^(1/2)))];
Lfxx = [(k1/((x1 - xf1)^2 + p1^2)^(1/2) - (k1*(2*x1 - 2*xf1)^2)/(4*((x1 - xf1)^2 + p1^2)^(3/2))) (0); (0) (k2/((x2 - xf2)^2 + p2^2)^(1/2) - (k2*(2*x2 - 2*xf2)^2)/(4*((x2 - xf2)^2 + p2^2)^(3/2)))];
end
